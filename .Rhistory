data %>%
ggplot(aes(x = date, y = value))+
geom_line()
install.packages('bcp')
library(bcp)
?bcp
set.seed(5)
x <- c(rnorm(50), rnorm(50, 5, 1), rnorm(50))
bcp.1a <- bcp(x)
plot(bcp.1a, main="Univariate Change Point Example")
legacyplot(bcp.1a)
#################################### SECTION TITLE ####################################
bcp.1a <- bcp(x = data$value,
burnin = 5000)
#################################### SECTION TITLE ####################################o %>%
filter(datatype == 'PRCP')
ncdc(stationid = 'GHCND:USW00024243',
startdate = '1960-01-01',
enddate = '2000-01-01')
rm(bcp.1a)
bcp.1a <- bcp(x = data$value,
burnin = 5000)
bcp.1a <- bcp(y = data$value,
burnin = 5000)
legacyplot(bcp.1a)
bcp.1a <- bcp(y = data$value,
burnin = 5000,
id = data$date)
legacyplot(bcp.1a)
#################################### SECTION TITLE ####################################
data %>%
ggplot(aes(x = date, y = value))+
geom_line()
install.packages('magrittr')
install.packages("magrittr")
install.packages('tsibble')
install.packages("tsibble")
install.packages('patchwork')
if (!'fable' %in% installed.packages())
devtools::install_github("tidyverts/fable")
#################################### Plot Data ####################################
data %>%
ggplot(aes(x = date, y = value))+
geom_line()+
scale_x_date('Year')
library(rnoaa)
library(lawn)
library(tidyverse)
library(leaflet)
library(tsibble)
library(lubridate)
library(magrittr)
library(fable)
if (!'fable' %in% installed.packages())
devtools::install_github("tidyverts/fable")
library(fable)
library(rnoaa)
library(lawn)
library(tidyverse)
library(leaflet)
library(tsibble)
library(lubridate)
library(magrittr)
#################################### Plot Data ####################################
data %>%
ggplot(aes(x = date, y = value))+
geom_line()+
scale_x_date('Year')
library(rnoaa)
library(lawn)
library(tidyverse)
library(leaflet)
library(tsibble)
library(lubridate)
library(magrittr)
R.version()
R.version
library(rnoaa)
library(lawn)
library(tidyverse)
library(leaflet)
library(tsibble)
library(lubridate)
library(magrittr)
install.packages("rnoa",'lawn','tidyverse','leaflet','tsibble','lubridate','magrittr')
install.packages("rnoaa",'lawn','tidyverse','leaflet','tsibble','lubridate','magrittr')
install.packages('rnoaa')
install.packages('lawn')
install.packages('tidyverse')
library(rnoaa)
library(lawn)
library(tidyverse)
library(leaflet)
library(tsibble)
library(lubridate)
library(magrittr)
data
#################################### Plot Data ####################################
data %>%
ggplot(aes(x = date, y = value))+
geom_line()+
scale_x_date('Year')
#################################### Plot Data ####################################
data %>%
ggplot(aes(x = as.date(date), y = value))+
geom_line()+
scale_x_date('Year')
help(as.date)
??as.Date
#################################### Plot Data ####################################
data %>%
ggplot(aes(x = as_date(date), y = value))+
geom_line()+
scale_x_date('Year')
#################################### Plot Data ####################################
data %>%
ggplot(aes(x = as_date(date), y = value))+
geom_line()+
scale_x_date('Year')+
scale_y_continuous('Monthly Precipitation')
#################################### Plot Data ####################################
data %>%
ggplot(aes(x = as_date(date), y = value))+
geom_line()+
scale_x_date('Year')+
scale_y_continuous('Monthly Precipitation')+
geom_smooth()
data
#################################### Plot Data ####################################
data %>%
ggplot(aes(x = as_date(date), y = value))+
geom_line()+
scale_x_date('Year')+
scale_y_continuous('Monthly Precipitation')+
geom_smooth()
library(rnoaa)
library(lawn)
library(tidyverse)
library(leaflet)
library(tsibble)
library(lubridate)
library(magrittr)
#################################### Plot Data ####################################
data %>%
ggplot(aes(x = as_date(date), y = value))+
geom_line()+
scale_x_date('Year')+
scale_y_continuous('Monthly Precipitation')+
geom_smooth()
#################################### Plot Data ####################################
data %>%
ggplot(aes(x = as_date(date), y = value))+
geom_line()+
scale_x_date('Year')+
scale_y_continuous('Monthly Precipitation')+
# geom_smooth()
#################################### Plot Data ####################################
data %>%
ggplot(aes(x = as_date(date), y = value))+
geom_line()+
scale_x_date('Year')+
scale_y_continuous('Monthly Precipitation')
# geom_smooth()
#################################### Plot Data ####################################
data %>%
ggplot(aes(x = as_date(date), y = value))+
geom_line()+
scale_x_date('Year')+
scale_y_continuous('Monthly Precipitation')
# geom_smooth()
#################################### Plot Data ####################################
data %>%
ggplot(aes(x = as_date(date), y = value))+
geom_line()+
scale_x_date('Year')+
scale_y_continuous('Monthly Precipitation')+
theme_light()
# geom_smooth()
?bcp
install.packages('bcp')
library(bcp)
?bcp
set.seed(5)
x <- rep(c(0,1), each=50)
y <- x + rnorm(50, sd=1)
bcp.1b <- bcp(y)
plot(bcp.1b, main="Univariate Change Point Example")
##
plot(x)
plot(x,y)
plot(y)
#################################### Plot Data ####################################
data %>%
ggplot(aes(x = as_date(date), y = value))+
geom_line()+
scale_x_date('Year')+
scale_y_continuous('Monthly Precipitation')+
theme_light()
plot(bcp.1b, main="Univariate Change Point Example")
plot.bcp(bcp.1b)
summary(bcp.1b)
set.seed(5)
x <- c(rnorm(50), rnorm(50, 5, 1), rnorm(50))
bcp.1a <- bcp(x)
plot(bcp.1a, main="Univariate Change Point Example")
legacyplot(bcp.1a)
legacyplot(bcp.1b)
20/2
d <- (99, 90.1, 80.9, 91.1, 81.4, 93.6, 102.3, 81.2)
d <- c(99, 90.1, 80.9, 91.1, 81.4, 93.6, 102.3, 81.2)
d
mean(d)
sd(d)
sd(d)/sqrt(8)
sd(d)/sqrt(8)*2.306
sqrt((sd(d))*2.929712)*2.306
10*3.182
sd(d)/sqrt(8)*2.998
sqrt((sd(d))*2.929712)*2.998
d
2.929*2.365
sqrt((sd(d))*2.929712)*2.365
sqrt((sd(d))+2.929712)*2.365
2.635*sd(d)*sqrt(1+(1/8))
2.365*sqrt((8.3^2)+(2.9^2))
library(tidyverse)
library(ggplot2)
# library(xlsx)
library(ggalt)
library(scales)
library(gridExtra)
library(rvest)
library(plyr)
library(stringr)
library(textclean)
library(lubridate)
library(gender)
rm(list = ls())
setwd('/Users/matthew/Documents/GitHub/judgeBias')
#################################### SECTION TITLE ####################################
url <-  'https://ballotpedia.org/Federal_judges_nominated_by_Barack_Obama'
website <- read_html(url)
tbls_ls <- website %>%
html_nodes("table") %>%
.[1:2] %>%
html_table(fill = TRUE)
jData <- tbls_ls[[1]]
rm(tbls_ls, website,url)
#################################### Clean up date ####################################
jData$`First nomination date` <-  parse_date_time(jData$`First nomination date`, orders = c('mdy'))
jData$`Hearing date` <-  parse_date_time(jData$`Hearing date`, orders = c('mdy'))
jData$`Confirmation date` <- parse_date_time(jData$`Confirmation date`, orders = c('mdy'))
# Separate out first names
names <- as.data.frame(as.character(sapply(str_split(jData$Name,' '),'[[',1),stringsAsFactors = FALSE))
names(names) <-  c('First_name')
names$First_name <- as.character(names$First_name)
jNames <- names
# Associate gender with names
library(gender)
jNames %>%
# rowwise() %>%
do(results = gender(.$First_name, years = c(1960, 2000),method = "ssa")) %>%
do(bind_rows(.$results)) -> names1
names1 %>%
select(name,gender) %>%
unique() -> names2
names(names2) <- c('First_name','gender')
jNames %>%
left_join(names2, by = c('First_name')) -> jNames2
jData1 <- cbind(jData,jNames2)
rm(list=setdiff(ls(), "jData1"))
jData1 <- jData1[!is.na(jData1$gender),]
jData1 <- jData1[jData1$Name != 'Robert Chatigny']
obama <- interval(ymd(20090101),ymd(20170101))
jData1 <- jData1[jData1$`First nomination date` %within% obama,]
a <- as.data.frame(logical(length = dim(jData1)[1]))
for(i in 1:dim(jData1)[1]){
a[i,1] <- !is.na(jData1[i,6])
}
b <- as.data.frame(rep(0,(dim(jData1)[1])))
for(i in 1:dim(a)[1]){
if(a[i,1] == TRUE){
b[i,1] <- 1
}
else {
b[i,1] <- 0
}
}
# b <- as.data.frame(b)
# a <- as.data.frame(a)
names(b) <- c('Conf_Status')
jData1 <- cbind(jData1,b)
jData1 <- cbind(jData1,year(jData1$`First nomination date`))
colnames(jData1)[11] <- c('year')
jData1 <- jData1[!is.na(jData1$gender),]
jData1 <- cbind(jData1,jData1$`Confirmation date` - jData1$`First nomination date`)
colnames(jData1)[12] <- c('Days_2_conf')
#################################### Days 2 conf box pot ####################################
jData1 %>%
filter(.,Conf_Status == TRUE) %>%
ggplot(aes(y = Days_2_conf,
x = year,
group = year,
fill = factor(gender),
color = factor(gender)))+
# geom_density()+
geom_boxplot()+
labs(x = 'Days until Judicial Confirmation',
y = 'Probability',
color = 'Gender',
title = 'Days until Obama Judicial Nominee is confirmed')+
theme_light()
# facet_wrap(~gender)
#################################### Days 2 conf box pot ####################################
jData1 %>%
filter(.,Conf_Status == TRUE) %>%
ggplot(aes(y = Days_2_conf,
x = gender,
fill = factor(gender),
color = factor(gender)))+
# geom_density()+
geom_boxplot()+
labs(x = 'Days until Judicial Confirmation',
y = 'Probability',
color = 'Gender',
title = 'Days until Obama Judicial Nominee is confirmed')+
theme_light()+
facet_wrap(~year)
#################################### Days 2 conf box pot ####################################
jData1 %>%
filter(.,Conf_Status == TRUE) %>%
ggplot(aes(y = Days_2_conf,
x = gender,
# fill = factor(gender),
color = factor(gender)))+
# geom_density()+
geom_boxplot()+
labs(x = 'Days until Judicial Confirmation',
y = 'Probability',
color = 'Gender',
title = 'Days until Obama Judicial Nominee is confirmed')+
theme_light()+
facet_wrap(~year)
#################################### Days 2 conf box pot ####################################
jData1 %>%
filter(.,Conf_Status == TRUE) %>%
ggplot(aes(y = Days_2_conf,
x = gender,
fill = factor(gender)
))+
# geom_density()+
geom_boxplot()+
labs(x = 'Days until Judicial Confirmation',
y = 'Probability',
color = 'Gender',
title = 'Days until Obama Judicial Nominee is confirmed')+
theme_light()+
facet_wrap(~year)
#################################### Days 2 conf box pot ####################################
jData1 %>%
filter(.,Conf_Status == TRUE) %>%
ggplot(aes(x = Days_2_conf,
y = gender,
fill = factor(gender)
))+
# geom_density()+
geom_boxplot()+
labs(x = 'Days until Judicial Confirmation',
y = 'Probability',
color = 'Gender',
title = 'Days until Obama Judicial Nominee is confirmed')+
theme_light()+
facet_wrap(~year)
#################################### Days 2 conf box pot ####################################
jData1 %>%
filter(.,Conf_Status == TRUE) %>%
ggplot(aes(y = Days_2_conf,
x = gender,
fill = factor(gender)
))+
# geom_density()+
geom_boxplot()+
labs(x = 'Days until Judicial Confirmation',
y = 'Probability',
color = 'Gender',
title = 'Days until Obama Judicial Nominee is confirmed')+
theme_light()+
facet_wrap(~year)
#################################### Days 2 conf box pot ####################################
jData1 %>%
filter(.,Conf_Status == TRUE) %>%
ggplot(aes(y = Days_2_conf,
x = gender,
fill = factor(gender)
))+
# geom_density()+
geom_boxplot()+
labs(x = 'Days until Judicial Confirmation',
y = 'Probability',
color = 'Gender',
title = 'Days until Obama Judicial Nominee is confirmed')+
theme_light()+
facet_wrap(~year)+
coord_flip()
#################################### Days 2 conf box pot ####################################
jData1 %>%
filter(.,Conf_Status == TRUE) %>%
ggplot(aes(y = Days_2_conf,
x = gender,
fill = factor(gender)
))+
# geom_density()+
geom_boxplot()+
labs(y = 'Days until Judicial Confirmation',
x = 'Gender',
fill = 'Gender',
title = 'Days until Obama Judicial Nominee is confirmed')+
theme_light()+
facet_wrap(~year)+
coord_flip()
#################################### Days 2 conf box pot ####################################
jData1 %>%
filter(.,Conf_Status == TRUE) %>%
ggplot(aes(y = Days_2_conf,
x = gender,
fill = factor(gender)
))+
# geom_density()+
geom_boxplot(notch = 'true')+
labs(y = 'Days until Judicial Confirmation',
x = 'Gender',
fill = 'Gender',
title = 'Days until Obama Judicial Nominee is confirmed')+
theme_light()+
facet_wrap(~year)+
coord_flip()
#################################### SECTION TITLE ####################################
min.mean.sd.max <- function(x) {
r <- c(min(x), mean(x) - sd(x), mean(x), mean(x) + sd(x), max(x))
names(r) <- c("ymin", "lower", "middle", "upper", "ymax")
r
}
jData1 %>%
filter(.,Conf_Status == TRUE) %>%
ggplot(aes(y = Days_2_conf,
x = gender,
fill = factor(gender)
))+
stat_summary(fun.data = min.mean.sd.max, geom = "boxplot")
#################################### SECTION TITLE ####################################
min.mean.sd.max <- function(x) {
r <- c(min(x), mean(x) - sd(x), mean(x), mean(x) + sd(x), max(x))
names(r) <- c("ymin", "lower", "middle", "upper", "ymax")
r
}
jData1 %>%
filter(.,Conf_Status == TRUE) %>%
ggplot(aes(y = Days_2_conf,
x = gender,
fill = factor(gender)
))+
stat_summary(fun.data = min.mean.sd.max, geom = "boxplot") +
facet_wrap(~year)
#################################### Days 2 conf box pot ####################################
jData1 %>%
filter(.,Conf_Status == TRUE) %>%
ggplot(aes(y = Days_2_conf,
x = gender,
fill = factor(gender)
))+
# geom_density()+
geom_boxplot(notch = 'true')+
labs(y = 'Days until Judicial Confirmation',
x = 'Gender',
fill = 'Gender',
title = 'Days until Obama Judicial Nominee is confirmed')+
theme_light()+
facet_wrap(~year)+
coord_flip()
#################################### SECTION TITLE ####################################
jData1 %>%
ggplot(aes(x = `First nomination date`, y = Conf_Status,
group = gender, color = gender))+
geom_point() +
geom_smooth(method = "glm",
method.args = list(family = "binomial"),
se = TRUE)+
theme_light()+
geom_vline(aes(xintercept = 2015))+
labs(x = 'First nomination Date',y = 'Probability of Confirmation', color = 'Gender')
#################################### SECTION TITLE ####################################
jData1 %>%
ggplot(aes(x = `First nomination date`, y = Conf_Status,
group = gender, color = gender))+
geom_point() +
geom_smooth(method = "glm",
method.args = list(family = "binomial"),
se = FALSE)+
theme_light()+
geom_vline(aes(xintercept = 2015))+
labs(x = 'First nomination Date',y = 'Probability of Confirmation', color = 'Gender')
#################################### SECTION TITLE ####################################
jData1 %>%
ggplot(aes(x = `First nomination date`, y = Conf_Status,
group = gender, color = gender))+
geom_point() +
geom_smooth(method = "glm",
method.args = list(family = "binomial"),
se = TRUE)+
theme_light()+
geom_vline(aes(xintercept = 2015))+
labs(x = 'First nomination Date',y = 'Probability of Confirmation', color = 'Gender')
